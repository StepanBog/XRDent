<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Doctor</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
</head>
<head>
    <title>Title</title>
</head>
<h2 th:text="${doctor.name}"></h2> <h2 th:text="${doctor.surname}"></h2>
<p><input id="patient" list="list">
    <datalist id="list"></datalist>
</p>
<form id="form">
    <input id="button" type="button" onclick="seePatient()" value="See Patient" />
    <input type="hidden" name="token" th:value="${token}" />
    <input type="hidden" name="doctor" th:value="${doctor.id}" />
</form>

<script th:inline="javascript">

    var list = document.getElementById('list');
    var data = [[${list}]]
    for (var i = 0, ln = data.length; i < data.length; i++) {
        var option = document.createElement('option');
        var m = data[i]
        option.value = m.name + " " + m.surname + " " + m.phoneNumber;
        list.appendChild(option)
    function findPatient(patient) {
        for (var i = 0, ln = data.length; i < data.length; i++) {
            if (patient === data[i].name + " " + data[i].surname + " " + data[i].phoneNumber){
                return data[i].id
            }
        }
    }
    function seePatient(){
        var form = document.getElementById('form');
        var id = findPatient(document.getElementById('patient').value)
        form.action = "../../patient/" + id
        form.submit();
    }

}</script>
</script>
<body>

</body>
</html>
